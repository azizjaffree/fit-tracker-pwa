<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Aziz & Yasmin Fit Tracker</title>
<link rel="manifest" href="manifest.json" />
<style>
:root{
  --bg:#05060a;--panel:#071127;--muted:#9aa6bd;--accent:#0a84ff;--accent-2:#ffd24d;
  --card:#0b1220;--glass:rgba(255,255,255,0.03);
}
html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial;
background:linear-gradient(180deg,#03040a 0%, #041025 100%);color:#eef2ff;}
.container{max-width:820px;margin:18px auto;padding:14px}
header{display:flex;flex-direction:column;gap:12px;align-items:center}
h1{margin:0;font-size:20px;font-weight:700}
.date-pick input[type="date"]{padding:10px 12px;border-radius:12px;border:0;background:var(--card);color:#fff;
box-shadow:0 6px 18px rgba(2,6,23,0.6);font-size:15px}
.banner{width:100%;background:linear-gradient(180deg,rgba(10,20,40,0.9),rgba(5,10,20,0.85));
border-radius:12px;padding:12px 14px;display:flex;justify-content:space-between;align-items:center;gap:10px;
box-shadow:0 8px 30px rgba(2,8,30,0.6)}
.banner-left{display:flex;flex-direction:column}
.small{color:var(--muted);font-size:13px}
.banner-right{display:flex;align-items:center;gap:10px}
.icon-btn{background:transparent;border:0;color:var(--muted);padding:8px;border-radius:8px;cursor:pointer}
.icon-btn:hover{color:var(--accent)}
.pill-btns{display:flex;gap:12px;margin-top:12px;justify-content:center;flex-wrap:wrap}
.pill{background:linear-gradient(180deg,rgba(10,20,40,0.95),rgba(8,16,32,0.9));border:1px solid rgba(255,255,255,0.03);
padding:12px 20px;border-radius:12px;color:#fff;font-weight:700;cursor:pointer;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
.pill.active{border:1px solid rgba(10,132,255,0.14)}
.panel{background:linear-gradient(180deg,rgba(7,12,20,0.6),rgba(6,10,18,0.55));
padding:14px;border-radius:12px;margin-top:12px;border:1px solid rgba(255,255,255,0.02)}
.meal-row{display:flex;gap:12px;align-items:flex-start;margin-bottom:10px}
.meal-name{width:120px;font-weight:700;color:#dbe9ff}
.options{display:flex;flex-direction:column;gap:8px}
label.option{display:flex;align-items:center;gap:12px;padding:10px;background:var(--glass);border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
label.option input[type="checkbox"]{transform:scale(1.1);accent-color:var(--accent)}
.cal{color:var(--muted);font-size:13px}
.muted{color:var(--muted);font-size:13px}
.row{display:flex;gap:10px;align-items:center}
.small-input{padding:8px;border-radius:8px;border:0;background:#071427;color:#fff}
.ex-item{background:linear-gradient(180deg,rgba(2,8,20,0.5),rgba(3,10,22,0.4));padding:10px;border-radius:10px;margin-bottom:10px;border:1px solid rgba(255,255,255,0.02)}
.sets-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
.set{background:#051026;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);display:flex;gap:8px;align-items:center}
.set input[type="number"]{width:68px;padding:6px;border-radius:8px;border:0;background:#081524;color:#fff}
.analysis-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.chart{background:#061026;border-radius:8px;padding:10px}
textarea{width:100%;height:88px;padding:8px;border-radius:8px;border:0;background:#051226;color:#fff}
@media(max-width:720px){.analysis-grid{grid-template-columns:1fr}}
/* Welcome overlay */
#welcomeOverlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#05060a;display:flex;flex-direction:column;
align-items:center;justify-content:center;z-index:2000;color:#fff}
#welcomeOverlay button{margin:10px;padding:12px 24px;font-weight:700;font-size:18px;border:0;border-radius:12px;
background:var(--accent);color:#fff;cursor:pointer}
</style>
</head>
<body>
<div id="welcomeOverlay">
  <h1>Welcome to the Aziz & Yasmin Fit Tracker</h1>
  <p style="color:#9aa6bd;margin-bottom:18px">Choose your profile</p>
  <div>
    <button onclick="selectUser('Aziz')">Aziz</button>
    <button onclick="selectUser('Yasmin')">Yasmin</button>
  </div>
</div>

<div class="container" id="appContainer" style="display:none">
  <header>
    <div class="banner">
      <div class="banner-left">
        <div id="profileTag" style="font-weight:800">üë§ ‚Äî | Weight: ‚Äî kg</div>
        <div id="weightDeltaText" class="small">Lost: ‚Äî kg</div>
      </div>
      <div class="banner-right">
        <button class="icon-btn" title="Switch User" onclick="switchUser()">üë§</button>
      </div>
    </div>

    <div class="pill-btns" role="tablist">
      <button class="pill active" id="tabFood" onclick="showTab('food')">üçΩÔ∏è Food</button>
      <button class="pill" id="tabExercise" onclick="showTab('exercise')">üèãÔ∏è Exercise</button>
      <button class="pill" id="tabAnalysis" onclick="showTab('analysis')">üìä Analysis</button>
    </div>
  </header>

  <div id="foodPanel" class="panel" style="display:block">
    <div class="muted">Meal timings ‚Äî Breakfast 09:30 ¬∑ Lunch 13:30 ¬∑ Snack 16:00 ¬∑ Post-WO 19:30 ¬∑ Dinner 21:00</div>
    <hr style="opacity:.06;margin:10px 0">
    <div id="foodContent">Loading meals‚Ä¶</div>
  </div>

  <div id="exercisePanel" class="panel" style="display:none">
    <div class="muted">Workout time 18:00‚Äì19:30 ¬∑ Edit sets, reps, weights</div>
    <hr style="opacity:.06;margin:10px 0">
    <div id="exerciseList">Loading workouts‚Ä¶</div>
  </div>

  <div id="analysisPanel" class="panel" style="display:none">
    <h3>Weekly Analysis</h3>
    <canvas id="weightChart" width="400" height="160" class="chart"></canvas>
    <div id="onTrackMsg" style="margin-top:10px"></div>
  </div>
</div>

<script>
/* ---------- USER HANDLING ---------- */
const USERS=["Aziz","Yasmin"];
let currentUser=null;
function storageKey(){return "fit10_tracker_v3_"+currentUser.toLowerCase();}
function selectUser(u){
  currentUser=u;
  localStorage.setItem("currentUser",u);
  document.getElementById("welcomeOverlay").style.display="none";
  document.getElementById("appContainer").style.display="block";
  loadUserState(); updateBanner();
}
function switchUser(){
  localStorage.removeItem("currentUser");
  location.reload();
}
window.addEventListener("DOMContentLoaded",()=>{
  const saved=localStorage.getItem("currentUser");
  if(saved&&USERS.includes(saved)){currentUser=saved;selectUser(saved);}
});

/* ---------- STATE ---------- */
function loadUserState(){
  if(!localStorage.getItem(storageKey())){
    const blank={meals:{},exercises:{},weights:{},notes:{}};
    localStorage.setItem(storageKey(),JSON.stringify(blank));
  }
}
function getState(){return JSON.parse(localStorage.getItem(storageKey()));}
function saveState(obj){localStorage.setItem(storageKey(),JSON.stringify(obj));}

/* ---------- SIMPLE FOOD + EXERCISE DEMO ---------- */
const sampleMeals=[
 {name:"Your standard breakfast",kcal:420},
 {name:"Grilled chicken lunch",kcal:650},
 {name:"Protein shake post-WO",kcal:220},
 {name:"Light dinner paneer + veggies",kcal:480}
];
const sampleExercises=[
 {title:"Bench Press",sets:4,reps:"10‚Äì12"},
 {title:"Lat Pulldown",sets:3,reps:"10‚Äì12"},
 {title:"Squats",sets:4,reps:"10"},
 {title:"Plank",sets:3,reps:"45 sec"}
];

/* Render Food */
function renderFood(){
 const c=document.getElementById("foodContent");c.innerHTML="";
 sampleMeals.forEach((m,i)=>{
   const d=document.createElement("div");
   d.className="meal-row";
   d.innerHTML=`<div class='meal-name'>${m.name}</div><div class='cal'>${m.kcal} kcal</div>`;
   c.appendChild(d);
 });
}
/* Render Exercise */
function renderExercise(){
 const c=document.getElementById("exerciseList");c.innerHTML="";
 sampleExercises.forEach(e=>{
   const div=document.createElement("div");
   div.className="ex-item";
   div.innerHTML=`<div><strong>${e.title}</strong> | Sets:${e.sets} Reps:${e.reps}</div>`;
   c.appendChild(div);
 });
}

/* ---------- ANALYSIS ---------- */
function renderAnalysis(){
 const ctx=document.getElementById("weightChart").getContext("2d");
 ctx.clearRect(0,0,400,160);
 ctx.fillStyle="#0a84ff";
 ctx.fillText("Weight progress chart will appear here (per user)",10,80);
}

/* ---------- BANNER ---------- */
function updateBanner(){
 const p=document.getElementById("profileTag");
 const st=getState();
 const lastW=st.weights.last||"--";
 p.textContent=`üë§ ${currentUser} | Weight: ${lastW} kg`;
 document.getElementById("weightDeltaText").textContent=`Lost: ‚Äî kg`;
 renderFood();renderExercise();renderAnalysis();
}

/* ---------- TABS ---------- */
function showTab(tab){
 ["food","exercise","analysis"].forEach(k=>{
   document.getElementById(k+"Panel").style.display=(k===tab)?"block":"none";
   document.getElementById("tab"+k.charAt(0).toUpperCase()+k.slice(1)).classList.toggle("active",k===tab);
 });
 if(tab==="analysis")renderAnalysis();
}
</script>
<script>
/* ---------- PWA Service Worker ---------- */
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker
      .register('./service-worker.js')
      .then(() => console.log('Service Worker registered'))
      .catch(err => console.error('Service Worker failed:', err));
  });
}

/* ---------- SIMPLE WEIGHT ENTRY DEMO ---------- */
function promptWeightUpdate(){
  const newW = prompt("Enter your current weight (kg):","");
  if(!newW) return;
  const st = getState();
  st.weights.last = parseFloat(newW);
  saveState(st);
  updateBanner();
}
</script>

<!-- Optional small floating button to update weight -->
<button onclick="promptWeightUpdate()"
 style="position:fixed;bottom:18px;right:18px;border:0;border-radius:50%;
 background:#0a84ff;color:#fff;width:58px;height:58px;
 font-size:24px;box-shadow:0 4px 14px rgba(0,0,0,0.4);cursor:pointer;">
‚öñÔ∏è
</button>

</body>
</html>

